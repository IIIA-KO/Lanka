<div class="offers-container">
  <div class="flex justify-content-between align-items-center mb-4">
    <h2>My Offers</h2>
    <button pButton type="button" 
            label="Create New Offer" 
            icon="pi pi-plus" 
            class="p-button-raised"
            (click)="navigateToCreate()">
    </button>
  </div>

  <div *ngIf="loading" class="flex justify-content-center p-4">
    <p-progressSpinner></p-progressSpinner>
  </div>

  <div *ngIf="error" class="p-4">
    <p-message severity="error" [text]="error"></p-message>
  </div>

  <div *ngIf="!loading && !error" class="offers-grid">
    <div *ngIf="offers.length === 0" class="no-offers-message">
      <div class="text-center p-6">
        <i class="pi pi-shopping-bag" style="font-size: 3rem; color: var(--text-color-secondary);"></i>
        <h3>No offers yet</h3>
        <p class="text-color-secondary">Create your first offer to start collaborating with brands.</p>
        <button pButton type="button" 
                label="Create Your First Offer" 
                icon="pi pi-plus" 
                class="p-button-outlined mt-3"
                (click)="navigateToCreate()">
        </button>
      </div>
    </div>

    <div *ngFor="let offer of offers" class="offer-card">
      <p-card>
        <ng-template pTemplate="header">
          <div class="flex justify-content-between align-items-center p-3">
            <h4>{{ offer.name }}</h4>
            <p-select 
              [options]="[
                {label: 'View', value: 'view', icon: 'pi pi-eye'},
                {label: 'Edit', value: 'edit', icon: 'pi pi-pencil'},
                {label: 'Delete', value: 'delete', icon: 'pi pi-trash'}
              ]" 
              placeholder="Actions"
              (onChange)="onOfferAction($event, offer.id)"

              appendTo="body">
              <ng-template pTemplate="trigger">
                <button pButton type="button" icon="pi pi-ellipsis-v" class="p-button-text p-button-sm" aria-label="Offer actions"></button>
              </ng-template>
            </p-select>
          </div>
        </ng-template>
        
        <ng-template pTemplate="content">
          <div class="offer-content">
            <p class="offer-description">{{ offer.description }}</p>
            <div class="offer-price">
              <span class="price-amount">{{ offer.priceAmount | currency:offer.priceCurrency }}</span>
            </div>
          </div>
        </ng-template>
        
        <ng-template pTemplate="footer">
          <div class="flex gap-2">
            <button pButton type="button" 
                    label="View Details" 
                    icon="pi pi-eye" 
                    class="p-button-outlined p-button-sm"
                    (click)="viewOffer(offer.id)">
            </button>
            <button pButton type="button" 
                    label="Edit" 
                    icon="pi pi-pencil" 
                    class="p-button-outlined p-button-sm"
                    (click)="editOffer(offer.id)">
            </button>
          </div>
        </ng-template>
      </p-card>
    </div>
  </div>
</div>
